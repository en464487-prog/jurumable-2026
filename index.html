<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ì£¼ë£¨ë§ˆë¸” - ì»¨íŠ¸ë¡¤ëŸ¬</title>
    <style>
        :root { --bg-color: #1a1c20; --card-bg: #2d3139; --point-color: #4cd964; --danger-color: #ff3b30; }
        body { background-color: var(--bg-color); color: white; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; text-align: center; margin: 0; padding: 20px; user-select: none; -webkit-tap-highlight-color: transparent; }
        
        /* UI ì»´í¬ë„ŒíŠ¸ */
        .box { background: var(--card-bg); padding: 20px; border-radius: 16px; margin-bottom: 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.3); }
        h2 { margin: 0 0 15px 0; font-size: 22px; font-weight: 700; }
        
        input { width: 100%; background: transparent; border: none; border-bottom: 2px solid #555; color: white; font-size: 20px; text-align: center; padding: 10px 0; outline: none; box-sizing: border-box; }
        input:focus { border-bottom-color: var(--point-color); }

        /* í•™ë²ˆ íƒœê·¸ ë²„íŠ¼ */
        .tag-row { display: flex; gap: 8px; justify-content: center; margin-bottom: 25px; }
        .tag { background: #3d424d; padding: 8px 16px; border-radius: 20px; cursor: pointer; font-size: 14px; border: 1px solid transparent; transition: 0.2s; color: #ccc; }
        .tag.active { border-color: var(--point-color); background: rgba(76, 217, 100, 0.1); color: var(--point-color); font-weight: bold; }

        /* ìºë¦­í„° ê·¸ë¦¬ë“œ (ì´ëª¨í‹°ì½˜) */
        .char-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 12px; }
        .char-item { background: var(--card-bg); padding: 15px 10px; border-radius: 12px; cursor: pointer; border: 2px solid transparent; transition: 0.2s; position: relative; }
        .char-item .emoji { font-size: 36px; display: block; margin-bottom: 5px; filter: grayscale(100%); opacity: 0.7; transition: 0.2s; }
        .char-item .name { font-size: 13px; color: #888; }
        
        /* ì„ íƒ í™œì„±í™” íš¨ê³¼ */
        .char-item.active { border-color: var(--point-color); background: rgba(76, 217, 100, 0.05); transform: translateY(-3px); }
        .char-item.active .emoji { filter: grayscale(0%); opacity: 1; transform: scale(1.1); }
        .char-item.active .name { color: white; font-weight: bold; }

        /* ì‹œì‘ ë²„íŠ¼ */
        .btn-start { background: var(--point-color); color: #1a1c20; padding: 18px; width: 100%; border: none; border-radius: 14px; font-size: 18px; font-weight: 800; margin-top: 30px; box-shadow: 0 0 20px rgba(76, 217, 100, 0.4); cursor: pointer; transition: 0.2s; }
        .btn-start:active { transform: scale(0.98); opacity: 0.8; }

        /* ğŸº ë¹„ë°€ ì£¼ëŸ‰ ì¹´ìš´í„° (ì¢Œì¸¡ í•˜ë‹¨) */
        .secret-counter { position: fixed; bottom: 20px; left: 20px; background: rgba(0,0,0,0.5); padding: 8px 12px; border-radius: 20px; font-size: 14px; display: flex; align-items: center; gap: 5px; border: 1px solid #444; }
        .secret-counter span { color: #ffd700; font-weight: bold; }

    </style>
</head>
<body>
    <div style="margin-bottom: 30px;">
        <h2 style="color:var(--point-color);">JURUMABLE</h2>
        <p style="color:#777; font-size:14px; margin:0;">ì…ì¥ ì •ë³´ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”</p>
    </div>

    <div class="box">
        <input type="text" id="userName" placeholder="ì´ë¦„ (ìµœëŒ€ 5ê¸€ì)" maxlength="5">
        <div class="tag-row" style="margin-top:15px; margin-bottom:0;">
            <div class="tag" onclick="selectTag(this, '21')">21í•™ë²ˆ</div>
            <div class="tag" onclick="selectTag(this, '23')">23í•™ë²ˆ</div>
            <div class="tag" onclick="selectTag(this, 'guest')">ê²ŒìŠ¤íŠ¸</div>
        </div>
    </div>

    <h3 style="text-align:left; font-size:16px; margin-bottom:10px; color:#ddd;">ë‚´ ìºë¦­í„° ì„ íƒ</h3>
    <div class="char-grid" id="charGrid">
        </div>

    <button class="btn-start" onclick="tryStartGame()">ì…ì¥í•˜ê¸°</button>

    <div class="secret-counter">
        ğŸº <span id="myDrinkCount">0</span>ì”
    </div>

    <script src="game_config.js"></script>
    <script>
        let selectedChar = null;
        let selectedTag = null;

        // 1. ì„¤ì • íŒŒì¼ì—ì„œ ìºë¦­í„° ë¶ˆëŸ¬ì˜¤ê¸°
        const grid = document.getElementById('charGrid');
        if (typeof GAME_CONFIG !== 'undefined') {
            GAME_CONFIG.characters.forEach(char => {
                const div = document.createElement('div');
                div.className = 'char-item';
                div.onclick = () => selectChar(div, char.id);
                div.innerHTML = `<span class="emoji">${char.emoji}</span><span class="name">${char.name}</span>`;
                grid.appendChild(div);
            });
        } else {
            alert("ì„¤ì • íŒŒì¼(game_config.js)ì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤!");
        }

        // 2. í•™ë²ˆ ì„ íƒ ë¡œì§
        function selectTag(el, val) {
            document.querySelectorAll('.tag').forEach(t => t.classList.remove('active'));
            el.classList.add('active');
            selectedTag = val;
            triggerHaptic(); // ì§„ë™ íš¨ê³¼
        }

        // 3. ìºë¦­í„° ì„ íƒ ë¡œì§
        function selectChar(el, charId) {
            document.querySelectorAll('.char-item').forEach(c => c.classList.remove('active'));
            el.classList.add('active');
            selectedChar = charId;
            triggerHaptic(); // ì§„ë™ íš¨ê³¼
        }

        // 4. í–…í‹±(ì§„ë™) íš¨ê³¼ - ì•ˆë“œë¡œì´ë“œ ì§€ì›
        function triggerHaptic() {
            if (navigator.vibrate) navigator.vibrate(10);
        }

        // 5. ì…ì¥í•˜ê¸° ë²„íŠ¼ í´ë¦­
        function tryStartGame() {
            const name = document.getElementById('userName').value.trim();
            if (!name) return alert("ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!");
            if (!selectedTag) return alert("í•™ë²ˆì„ ì„ íƒí•´ì£¼ì„¸ìš”!");
            if (!selectedChar) return alert("ìºë¦­í„°ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”!");

            // ì—¬ê¸°ì„œ ë‚˜ì¤‘ì— íŒŒì´ì–´ë² ì´ìŠ¤ë¡œ ë°ì´í„°ë¥¼ ì˜ê²Œ ë©ë‹ˆë‹¤.
            alert(`í™˜ì˜í•©ë‹ˆë‹¤ ${name}ë‹˜!\n[${selectedChar}] ìºë¦­í„°ë¡œ ëŒ€ê¸°í•©ë‹ˆë‹¤.`);
            
            // ì•Œë¦¼ ê¶Œí•œ ìš”ì²­ (ì•„ì´í°ìš© ì‚¬ìš´ë“œ ì–¸ë½)
            unlockAudio();
        }

        // 6. ì‚¬ìš´ë“œ ì–¸ë½ (ëª¨ë°”ì¼ ë¸Œë¼ìš°ì € ì •ì±… ëŒ€ì‘)
        function unlockAudio() {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            if (AudioContext) {
                const ctx = new AudioContext();
                ctx.resume();
            }
        }
    </script>
</body>
</html>